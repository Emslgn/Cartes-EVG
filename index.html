<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Les Zammours sp√©cial HUGO & SA FUTURE FEMME</title>
  <style>
    body {
      font-family: sans-serif;
      background: #0a0f1c;
      color: white;
      text-align: center;
      padding: 2em;
    }
    h1 {
      color: #fff;
    }
    .button {
      margin: 0.5em;
      padding: 0.6em 1.2em;
      background: #1f2a44;
      color: white;
      border: none;
      border-radius: 5px;
    }
    .button:hover {
      background: #2c3e60;
      cursor: pointer;
    }
    .card {
      border: 2px solid #ffffff33;
      background: #12182b;
      padding: 1.5em;
      border-radius: 8px;
      margin: 1em auto;
      max-width: 600px;
    }
    .highlight {
      color: #ffd700;
    }
    .hidden {
      display: none;
    }
    #penaltyWheel {
      margin-top: 2em;
    }
    #penaltyBox {
      margin-top: 2em;
      font-size: 1.2em;
      font-weight: bold;
      color: #ff6666;
    }
  </style>
</head>
<body>

  <div id="home">
    <h1>Les Zammours sp√©cial HUGO & SA FUTURE FEMME</h1>
    <button class="button" onclick="selectCat('Vie de couple')">Vie de couple</button>
    <button class="button" onclick="selectCat('Sous la couette')">Sous la couette</button>
    <button class="button" onclick="selectCat('Vision d‚ÄôHugo')">Vision d‚ÄôHugo</button>
    <button class="button" onclick="selectCat('Moment mignon')">Moment mignon</button>
  </div>

  <div id="cards" class="hidden">
    <button class="button" onclick="backHome()">‚¨Ö Accueil</button>
    <button class="button" onclick="resetGame()">üîÅ R√©initialiser le jeu</button>
    <div class="status" id="progressStatus"></div>
    <div class="card" id="questionBox"></div>
    <button class="button" onclick="nextQuestion()">Suivante</button>
    <button class="button" onclick="randomQuestion()">Carte al√©atoire</button>
    <br>
    <button class="button" onclick="markCorrect()">‚úÖ Bonne r√©ponse</button>
    <button class="button" onclick="markWrong()">‚ùå Mauvaise r√©ponse</button>
    <canvas id="penaltyWheel" width="300" height="300" class="hidden"></canvas>
    <div id="penaltyBox"></div>
  </div>

  <script>
    const data = {
      "Vie de couple": [...],
      "Sous la couette": [...],
      "Vision d‚ÄôHugo": [...],
      "Moment mignon": [...]
    };

    const penalties = [
      "Boire un shot pr√©par√© par 2 potes",
      "Chanter un slow d'amour",
      "√âcrire un texto absurde √† un pote",
      "D√©claration d‚Äôamour √† un objet",
      "15 pompes + crier 'Je suis l‚Äôhomme de la situation'",
      "Story Insta + filtre g√™nant + ‚ù§Ô∏è",
      "Pub pour vendre Hugo en 20 sec",
      "Selfie avec un inconnu",
      "Commander un verre avec un accent",
      "Danser seul 1 min sur chanson impos√©e",
      "Demander un autographe dans la rue",
      "Imiter un guide touristique",
      "D√©crire ton crush masculin",
      "Lettre tragique √† Sophie",
      "R√©p√©ter phrase absurde avec conviction",
      "Mimer une sc√®ne romantique",
      "Raconter un moment de solitude",
      "Imitation de toi en dragueur",
      "Changer de pr√©nom 30 minutes",
      "Deviner ce que chacun ferait avec 1M‚Ç¨",
      "Parler comme un robot 5 min",
      "Appeler tout le monde 'Mon tr√©sor'",
      "Porter un accessoire d√©bile",
      "Ramper fa√ßon commando",
      "Tenir la main d‚Äôun pote 10 min"
    ];

    let currentCat = null;
    let idx = 0;
    let correctCount = 0;
    let wrongCount = 0;

    function selectCat(cat) {
      currentCat = cat;
      idx = 0;
      correctCount = 0;
      wrongCount = 0;
      showScreen('cards');
      showQuestion();
    }

    function showScreen(id) {
      document.getElementById('home').classList.toggle('hidden', id !== 'home');
      document.getElementById('cards').classList.toggle('hidden', id !== 'cards');
    }

    function showQuestion() {
      document.getElementById('questionBox').innerText = data[currentCat][idx];
      document.getElementById('penaltyBox').innerText = "";
      updateProgress();
    }

    function nextQuestion() {
      idx = (idx + 1) % data[currentCat].length;
      showQuestion();
    }

    function randomQuestion() {
      idx = Math.floor(Math.random() * data[currentCat].length);
      showQuestion();
    }

    function markCorrect() {
      correctCount++;
      showQuestion();
    }

    function markWrong() {
      wrongCount++;
      document.getElementById("penaltyWheel").classList.remove("hidden");
      spinWheel();
    }

    function updateProgress() {
      document.getElementById('progressStatus').innerHTML =
        `Cat√©gorie : <strong>${currentCat}</strong><br>
        <span class="highlight">${correctCount}</span> bonnes r√©ponses |
        <span class="highlight">${wrongCount}</span> mauvaises r√©ponses`;
    }

    function resetGame() {
      correctCount = 0;
      wrongCount = 0;
      idx = 0;
      showQuestion();
    }

    function backHome() {
      showScreen('home');
    }

    // --- WHEEL FUNCTIONS ---
    const canvas = document.getElementById("penaltyWheel");
    const ctx = canvas.getContext("2d");
    const wheelRadius = canvas.width / 2;
    let angle = 0;
    let spinning = false;

    function drawWheel() {
      const segmentAngle = 2 * Math.PI / penalties.length;
      for (let i = 0; i < penalties.length; i++) {
        ctx.beginPath();
        ctx.moveTo(wheelRadius, wheelRadius);
        ctx.arc(wheelRadius, wheelRadius, wheelRadius, segmentAngle * i, segmentAngle * (i + 1));
        ctx.fillStyle = i % 2 === 0 ? "#ffa500" : "#ff6347";
        ctx.fill();
        ctx.fillStyle = "white";
        ctx.font = "10px sans-serif";
        ctx.save();
        ctx.translate(wheelRadius, wheelRadius);
        ctx.rotate(segmentAngle * i + segmentAngle / 2);
        ctx.textAlign = "right";
        ctx.fillText(penalties[i], wheelRadius - 10, 0);
        ctx.restore();
      }
    }

    function spinWheel() {
      if (spinning) return;
      spinning = true;
      let duration = 3000; // 3 sec
      let start = null;
      let rotateSpeed = Math.random() * 10 + 10;

      function rotate(timestamp) {
        if (!start) start = timestamp;
        let progress = timestamp - start;
        angle += rotateSpeed;
        rotateSpeed *= 0.98; // friction
        ctx.clearRect(0, 0, canvas.width, canvas.height);
        ctx.save();
        ctx.translate(wheelRadius, wheelRadius);
        ctx.rotate(angle * Math.PI / 180);
        ctx.translate(-wheelRadius, -wheelRadius);
        drawWheel();
        ctx.restore();

        if (progress < duration) {
          requestAnimationFrame(rotate);
        } else {
          spinning = false;
          const segment = Math.floor(((angle % 360) / 360) * penalties.length);
          const selected = penalties[(penalties.length - segment) % penalties.length];
          document.getElementById('penaltyBox').innerText = `üéØ GAGE : ${selected}`;
        }
      }

      requestAnimationFrame(rotate);
    }

    drawWheel();
  </script>
</body>
</html>
